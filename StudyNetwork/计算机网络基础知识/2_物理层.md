[toc]

# 物理层

## 1. 物理层的基本概念

### 1.1 主要任务

确定与**传输媒体的接口**有关的一些特性

### 1.2 作用

尽可能地屏蔽掉传输媒体和通信手段的差异, 使物理层上面的数据链路层感觉不到差异, 这样就可以使数据链路层只需要考虑如何完成本层的协议和服务, 而不必考虑网络具体的传输媒体和通信手段.

简而言之: 对上提供服务, 屏蔽数据在线路上传输时的差异

物理层的协议又称**规程**

### 1.3 物理层定义的特性

+ 机械特性    对接口的定义
+ 电气特性     电压大小
+ 功能特性    定义电压的含义
+ 过程特性     指明不同功能的各个可能事件的出现顺序

## 2. 数据通信基础

### 2.1 数据通信模型

1. 局域网通信模型:直接使用数字信号(传输距离短, 一般不超过200m, 即计算机与集线器/交换机之间的距离不超过100m)
2. 广域网通信模型:中间传输模拟信号

![image-20210918200152302](https://gitee.com/four_four/picgo/raw/master/img/20210918200159.png)

### 2.2 常用术语

1. **信息(message)** 通信的目的是传送信息, 信息可以是文字, 图像, 音频, 视频等
   浏览器发送的信息
2. **数据(data)** 编码后的信息就是数据
   网卡发送的是数据
3. **信号(signal)** 数据在通信线路上传递需要变成电信号或光信号
   线路上传输的是信号

**信号传输数据, 数据承载信息**

![信息, 数据与信号](https://gitee.com/four_four/picgo/raw/master/img/20210918200714.png) 

​	

![模拟信号与数字信号](https://gitee.com/four_four/picgo/raw/master/img/20210918201505.png)  





### 2.3 数字信号与模拟信号

> 概念

+ **模拟信号**
  消息参数的取值是连续的
+ **数字信号** 
  消息参数的取值是离散的

+ **二进制码元**         数字信号中的0/1
  **码元**                      代表不同离散数值的基本波形
                                 一个码元可以代表多位的二进制数

> 数字信号与模拟信号的优缺点

+ 模拟信号
  + 传输的距离更远
  + 传输过程中如果出现信号干扰波形发生变形, 很难纠正
+ 数字信号
  + 传输距离短
  + 数字信号波形失真可以修复

> 模拟信号转换为数字信号

![模拟信号转换为数字信号](https://gitee.com/four_four/picgo/raw/master/img/20210918202700.png) 

**采样频率** 越高, **采样精度** 越高, 模拟信号越能精确地表示模拟信号

### 2.4 信道与调制

#### 2.4.1 信道

+ 一个发送端, 一个接收端
+ 信道一般都是用来表示向某一个方向传送信息的媒体
+ 多个信道可以使用同一个物理链路(信道复用技术)

#### 2.4.2 通信双方信息交互方式

1. 单向通信(单工通信)
   单方向的通信                         广播, 电台
2. 双向交替通信(半双工通信)
   通信双方都可以发送信息, 单不能同时发送                 对讲机
3. 双向同时通信(全双工通信)
   通信的双方可以同时发送和接收信息                       手机电话

![计算机的半双工与全双工](https://gitee.com/four_four/picgo/raw/master/img/20210918212526.png) 



#### 2.4.3 调制

> 什么是调制

从信源发出的信号, 通过调制可以传输的更远

来自信源的信号通常称为**基带信号(基本频带信号)** 

> 分类

1. 基带调制
   1. 仅仅对基带信号的波形进行转换, 使它能够与信道特性相适应, **变化后的信号仍然是基带信号** . 由于这种基带调制是把**数字信号转换为另一种形式的数字信号** , 因此也叫编码
   2. 调制方法:
      + 不归零制
        用高低电平代表1, 0
        缺点: 发送端和接收端必须同步, 否则对于连续的0或1, 接收端无法判断有几个码元 
      + 归零制
        有高,0, 低三个电压, 通过跳变来判断是0还是1
        优点: 接收端和发送端不必同步, 接收端可以通过跳变来判断接受的码元
        缺点: 0电压所占用的时间不传输有效信息, 造成浪费  
      + 曼切斯特编码
        对于传输的数据, 每一个比特位都有一个跳变; 0     低->高,    高->低
        特点: 两个码元携带一个bit的信息
      + 差分曼切斯特编码
        每个bit位中间始终都有跳变, 当前bit是0是位开始边界有跳变, 是1位开始边界没有跳变
2. 带通调制
   1. 使用载波(carrier)进行调制, 把基带信号的频率范围搬移到较高的频段以便在信道中传输. 经过载波调制后的信号称为带通信号.
      **数字信号 —->      模拟信号** 
   2. 分类
      + 调幅
        没有振幅为0, 有振幅为1
      + 调频
        低频为0, 高频为1
      + 调相
        用正弦波, 余弦波代表0和1

![调制](https://gitee.com/four_four/picgo/raw/master/img/20210918215852.png) 

### 2.5 信道的极限容量

一个物理线路最快传输码元的速率

#### 2.5.1 限制码元传输速率的因素

1. 信道能够通过的频率范围
   方波的形成: 方波是由低频的基波和高频的谐波叠加形成的, 在传输时, 高频的谐波无法通过信道, 此时接收端接收到的就是能识别的信号
   ![模拟信号谐波成数字信号](https://gitee.com/four_four/picgo/raw/master/img/20210918221345.png) 
   + 奈氏准则(数字信号)
     + 在任何信道中, 码元传输的速率都是邮上线的, 否则就会出现**码间串扰** 的问题, 使接收端对码元的判决成为不可能
     + 如果信道的频带越宽, 即能通过的信号高频分量越多, 越可以使用更高频率传输码元而不出现码间串扰
       可以理解为可以选择的基波的频率越高, 传输码元的速度就越高
     + 公式:
       $理想低通信道的最高码元传输速率=2\times W\times Baud$  W    理想低通信道的带宽, 单位Hz
         Baud  波特  码元传输速率的单位
       使用奈氏准则给出的公式, 可以根据**信道的带宽** 计算出码元的最高传输速率
   + 在码元传输速率一定的情况下提高数据传输速率: 让一个码元承载更多位bit的数据
     ![image-20210918222819674](https://gitee.com/four_four/picgo/raw/master/img/20210918222819.png) 
2. 信噪比
   + 噪声会使接收端对码元的判决产生错误
   + 当一个码元携带的信息量确定时, 影响传输的就是信号的平均功率和噪声的平均功率
     信号的平均功率越大, 码元之间的电压差越大, 越不容易被信号干扰;   噪声的平均功率越小, 对码元的影响就越小
   + 公式:
     $信噪比(dB)=10\times lg(\frac{S}{N})(dB)$ 

#### 2.5.2 香农公式

有噪声的信道的极限信息传输速率C:

$C=W\times log_2(1+\frac{S}{N})(b/s)$  
W: 信道的带宽, 单位Hz

S: 信道内所传信号的平均功率

N: 信道内的高斯噪声功率

计算器计算       $log_2(M) = \frac{log_{10}M}{log_{10}2}$ 

## 3. 传输媒体

### 3.1 引导型传输媒体

电磁波被导引沿着固体媒体(铜线或光纤)传播

1. 双绞线
   四对线

   1. 接口标准    
      T568B标准: 白橙   橙   白绿    蓝    白蓝    绿    白棕    棕
      T568A标准: B标准的1, 3位互换, 2, 6位互换
+ 直通线
        两头线序相同
        电脑连交换机, 集线器等设备(交换机的线序调整过了)
    
+ 交叉线
        两头线序不同
        同类设备相连(两个交换机相连)
    
+ 全反线
        电脑调路由器接口
    
2. 分类
  
   + 屏蔽双绞线(STP)
      + 无屏蔽双绞线(UTP)
   
2. 同轴电缆
   有线电视

3. 光缆
   ![image-20210918230414087](https://gitee.com/four_four/picgo/raw/master/img/20210918230414.png)

   + 多模光纤
     多模光纤使用多个入射角时, 可以有多个反射路程, 不同的路程可以被解码为多个不同的脉冲

   + 单模光纤

     纤芯非常细, 不能进行全反射, 只能传输单一频率的光, 但是传导性比多模光纤好
     ![image-20210918230945942](https://gitee.com/four_four/picgo/raw/master/img/20210918230946.png) 

### 3.2 非导引型传输媒体

1. 无线电传输
2. 短波通信(依靠电离层的反射, 电离层的多径效应可能是的通信质量较差)
3. 无线电微波通信(微波在空气中主要是直线传播, 主要方式是**地面微波接力通信** 和 **卫星通信**)



## 4. 信道复用

### 4.1 频分复用(FDM Frequency Division Multiplexing)

用于**模拟信号** 

不同的信道使用不同的频带; 用户在分配到一定的频带以后,在通信过程中自始至终都占用这个频带. **频分复用 的所有用户在相同的时间占用不同的带宽资源.** 

![频分复用](https://gitee.com/four_four/picgo/raw/master/img/20210919144842.png) 



### 4.2 时分复用(TDM   Time Division Multiplexing)

用于**数字信号**  

时分复用技术是将时间划分为一段段等长的时分复用帧(TDM帧), 每个时分复用的用户在每一个TDM帧中占用固定序号的时隙.
每个用户所占用的时隙周期性的出现, 因此TDM信号也称为**等时信号** 

![image-20210919151515322](https://gitee.com/four_four/picgo/raw/master/img/20210919151515.png) 



> 时分复用的缺点

当某个用户暂无数据发送时, TDM帧中分配给该用户的时隙只能处于空闲状态, 导致复用后的信道利用率不高.

![时分复用的缺点](https://gitee.com/four_four/picgo/raw/master/img/20210919151832.png) 



> 统计时分复用(STDM)

![统计时分复用](https://gitee.com/four_four/picgo/raw/master/img/20210919152245.png) 

 

先将多个低速用户的数据集中起来, 集中器按顺序依次扫描放入缓存, 在每个缓存的数据上添加一个标记用来表示发送的目的地, 然后把缓存中的输入数据放入STDM帧中. 对没有数据的缓存就跳过去. 当一个STDM帧放满时就发送出去. 



### 4.3 波分复用

光的频分复用 



### 4.4 码分复用(CDM    Code Division Multiplexing)

又称码分多址(CDMA Code Division Multiple Access), 多用于移动通信.  码分复用传输的基本单位是码元(chip), 每个码元代表一个bit. 一个码片包含了m个码元.

使用CDMA的每个站(如手机)被指派一个唯一的mbit码片序列. **发送1时就发送该码片, 发送0时发送该码片的反码.**  

**码片序列的特征: 每个站分配的码片序列必须各不相同, 而且相互正交.**

> 码片序列

1. 两个码片序列相互正交, 即两个向量相互垂直, 规格化内积为0.
   $\vec{S} \cdot \vec{T} = \frac{1}{m} \sum_{i=1}^n S_i T_i = 0$   
   eg: 
   A:  -1    -1    -1    +1    +1    -1    +1    +1
   B:  -1    -1    +1    -1    +1    +1    +1    -1
   $\vec{A} \cdot \vec{B} = \frac{1}{8} \times ((-1)\times(-1) + (-1)\times(-1) + (-1)\times(+1) + (+1)\times(-1) + (+1)\times(+1) + (-1)\times(+1) + (+1)\times(+1) + (+1)\times(-1)) = \frac{1}{8} \times (1+1-1-1+1-1+1-1) = 0$

