## 系统调用

操作系统提供了一系列[[操作系统的功能和目标#向上提供方便易用的服务|接口]]供用户和程序使用. 其中程序使用的程序接口是由一系列的系统调用组成的.

应用程序可以通过系统调用来请求获得操作系统内核的服务.

### 系统调用的作用
当多个进程同时请求某个共享资源时, 为防止发生错误, 由操作系统内核对共享资源进行统一的管理, 并向上提供"系统调用", 用户进程想要使用共享资源, 只能通过系统调用向操作系统内核发出请求. 内核会对各个请求进行协调处理.

可以将操作系统内核看作房东, 用户程序是租客, 系统调用 就是租客申请住房的申请单. 申请单交给房东后, 由房东决定谁能住, 住哪间房, 住多久. 租客不能直接住进房子里. 


### 什么功能要用到系统调用

凡是与**共享资源有关的操作**, 都必须经过系统调用的方式向操作系统内核提出服务请求.

如: 存储空间的分配, I/O操作, 文件管理等

### 系统调用的过程
1. 用户程序向CPU中的寄存器中写入必要的参数, 用来指定系统调用的类型和参数
2. 用户程序发出陷入指令, 操作系统由用户态转为内核态
3. 内核态执行系统调用入口程序, 该程序依据 系统调用类型和参数 调用对应的中断处理程序
4. CPU从内核态转为用户态,CPU返回给应用程序并继续执行


陷入指令 \=\=trap指令\=\=访管指令
